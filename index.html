<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <title>珍珠捕捞游戏</title>
    <style>
        body { background: #0077be; margin: 0; overflow: hidden; font-family: Arial, sans-serif; }
        .shell { width: 100px; height: 80px; margin: 20px; background: #f5deb3; border-radius: 50% 50% 0 0; display: inline-block; cursor: pointer; box-shadow: 0 5px 15px rgba(0,0,0,0.2);}
        .shell:hover { transform: scale(1.1);}
        .popup { display: none; position: fixed; top: 40%; left: 50%; transform: translate(-50%,-50%); background: #fff; padding: 20px; border-radius: 10px; box-shadow: 0 5px 25px rgba(0,0,0,0.3);}
        .claim-button { margin-top: 20px; padding: 10px 30px; background: #4CAF50; color: #fff; border: none; border-radius: 5px; cursor: pointer; font-size: 16px;}
        .music-control { position: fixed; top: 20px; right: 20px; width: 40px; height: 40px; background: #fff7; border-radius: 50%; cursor: pointer; display: flex; align-items: center; justify-content: center; }
        .music-icon { width: 20px; height: 20px; background: #0077be; border-radius: 50%; }
        .muted .music-icon { background: #ff0000; }
    </style>
</head>
<body>
    <div style="text-align:center;margin-top:60px;">
        <div class="shell" onclick="openShell(this)"></div>
        <div class="shell" onclick="openShell(this)"></div>
        <div class="shell" onclick="openShell(this)"></div>
        <div class="shell" onclick="openShell(this)"></div>
        <div class="shell" onclick="openShell(this)"></div>
        <div class="shell" onclick="openShell(this)"></div>
        <div class="shell" onclick="openShell(this)"></div>
        <div class="shell" onclick="openShell(this)"></div>
        <div class="shell" onclick="openShell(this)"></div>
    </div>
    <div class="popup" id="popup">
        <p id="reward-message"></p>
        <button class="claim-button" onclick="closePopup()">关闭</button>
    </div>
    <div class="music-control" onclick="toggleMusic()" id="musicBtn">
        <div class="music-icon"></div>
    </div>
    <audio id="background-sound" preload="auto" loop>
        <source src="oceanwave.ogg" type="audio/ogg">
        您的浏览器不支持音频元素。
    </audio>
    <script>
        let isMusicPlaying = false;
        const musicControl = document.getElementById('musicBtn');
        const backgroundSound = document.getElementById('background-sound');
        function toggleMusic() {
            if (isMusicPlaying) {
                backgroundSound.pause();
                musicControl.classList.add('muted');
            } else {
                backgroundSound.play();
                musicControl.classList.remove('muted');
            }
            isMusicPlaying = !isMusicPlaying;
        }
        function openShell(shell) {
            document.getElementById('reward-message').innerText = "恭喜获得奖励！";
            document.getElementById('popup').style.display = 'block';
            shell.style.background = "#ffe4b5";
            shell.style.pointerEvents = "none";
            if (!isMusicPlaying) toggleMusic();
        }
        function closePopup() {
            document.getElementById('popup').style.display = 'none';
        }
        // 兼容GitHub Pages自动播放策略，首次用户点击才允许播放
        document.addEventListener('click', function enableAudio() {
            backgroundSound.load();
            document.removeEventListener('click', enableAudio);
        }, { once: true });
    </script>
</body>
</html>